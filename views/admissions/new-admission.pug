extends ../layouts/base.pug
block styles
    style.
        .affidavit-section {
            margin-top: 20px;
            padding: 10px 0;
            
        }

        .affidavit-header {
            text-align: center;
            margin: 10px;
        }

        .affidavit-header h2 {
            color: #2c3e50;
            font-size: 1.8rem;
            margin-bottom: 5px;
        }

        .affidavit-content {
            max-width: 1000px;
            margin: 0 auto;
            display:flex;

        }

        .form-link-box {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            margin-right:10px;
            text-align: center;
            border: 1px solid #e9ecef;
            height:200px;
        }

        .form-link-box label {
            font-size: 1rem;
            color: #495057;
            margin-bottom: 8px;
            display: block;
            font-weight: 600;
        }

        .btn-primary {
            background-color: #3498db;
            color: white;
            padding: 10px 20px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            border: none;
            cursor: pointer;
        }

        .btn-primary:hover {
            background-color: #2980b9;
        }

        .btn-primary i {
            margin-right: 6px;
            font-size: 0.9rem;
        }

        .instructions-box {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            border: 1px solid #e9ecef;
            font-size: 0.95rem;
        }

        .instructions-box h3 {
            color: #2c3e50;
            font-size: 1.2rem;
            margin-top: 0;
            margin-bottom: 5px;
            padding-bottom: 2px;
            border-bottom: 1px solid #dee2e6;
        }

        .section {
            margin-bottom: 0px;
            padding-bottom: 0px;
        }

        .section:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .section h4 {
            color: #2c3e50;
            font-size: 1.0rem;
            margin-top: 0;
            margin-bottom: 2px;
            font-weight: 500;
        }

        .section ul {
            padding-left: 20px;
            margin: 6px 0;
        }

        .section li {
            margin-bottom: 5px;
            position: relative;
            line-height: 1.4;
        }

        .section li:before {
            content: 'â€¢';
            position: absolute;
            left: -15px;
            color: #3498db;
            font-size: 1.0rem;
        }

        .subsection {
            margin-top: 2px;
            margin-left: 10px;
            padding-left: 10px;
            border-left: 1px solid #eaeaea;
        }

        .subsection h5 {
            color: #2c3e50;
            font-size: 1.0rem;
            margin-top: 0;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .subsection ul {
            padding-left: 15px;
        }

        /* Responsive styles */
        @media (max-width: 768px) {
            .affidavit-header h2 {
                font-size: 1.6rem;
            }
            
            .form-link-box,
            .instructions-box {
                padding: 12px;
            }
            
            .instructions-box h3 {
                font-size: 1.2rem;
            }
            
            .section h4 {
                font-size: 1.1rem;
            }
            
            .subsection {
                margin-left: 5px;
                padding-left: 8px;
            }
        }
block content
    main
        div.admission-container2(style="display: flex; gap: 2rem;")
            section.admission-instructions-section(style="flex: 1;")
                if admissionData.title
                    h2.subheading(style="text-align: center;")= admissionData.title    
                if admissionData
                    .instructions-header
                        h1.primary_heading2= admissionData.heading || 'Admissions Open'
                    each section, index in admissionData.sections
                        .instruction-card
                            .section-header
                                .section-number= index + 1
                                if section.title
                                    h2.section-title= section.title
                            .section-content
                                p= section.content
                                if index==0
                                    if programdetails && programdetails.length
                                        .table-responsive
                                            table.program-table
                                                thead
                                                    tr
                                                        th S.no
                                                        th Program
                                                        th Eligibility   
                                                tbody
                                                    each item in programdetails
                                                        tr
                                                            td= item.priority
                                                            td 
                                                                .tdprogram-name= item.programme
                                                                .tdprogram-domain= item.domain
                                                            td= item.eligibility
                                                            
                                    else
                                        .alert.alert-info
                                            | No program details available at the moment.
                                
                                //- Updated for multiple links
                                - 
                                  // Normalize links to array
                                  let links = [];
                                  if (section.links && Array.isArray(section.links)) {
                                    links = section.links;
                                  } else if (section.link) {
                                    links = [section.link];
                                  }
                                
                                if links.length
                                  .cta-container
                                    each link in links
                                      if link.text && link.url
                                        a.cta-button(href=link.url target="_blank")
                                          = link.text
                                          i.fas.fa-external-link-alt
                    
                else
                    .instructions-header.text-center
                        h1.primary_heading Admissions Information
                    .instruction-card
                        .section-content
                            p Admission details will be available soon. Please check back later.


            div.div.adminssionwrapper(style="flex: 1;")
                div.adminssionwrapperform
                    if submitted
                        .success-note.margin-top-xs.margin-bottom-lg
                            .svg
                                svg(fill="green" xmlns='http://www.w3.org/2000/svg' height="1.5rem" viewBox='0 0 512 512')
                                    path(d='M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z')
                            .text Thank you for your admission inquiry! We deeply appreciate your interest in joining our college. Our dedicated team is eagerly reviewing your inquiry and will reach out to you promptly. Your enthusiasm is valued, and we look forward to welcoming you to our vibrant community soon!

                    if error
                        .error-note.margin-top-xs.margin-bottom-xs
                            .svg
                                svg(xmlns='http://www.w3.org/2000/svg' height="1.5rem" viewBox='0 0 512 512')
                                    path(d='M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-384c13.3 0 24 10.7 24 24V264c0 13.3-10.7 24-24 24s-24-10.7-24-24V152c0-13.3 10.7-24 24-24zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z')
                            .text Oops! Something unexpected happend. Try again!

                    if !submitted
                    form.form-1.margin-top-xs(action="/post-new-admission" method="post") 
                        h3 Admission Inquiry
                        .center 
                            div 
                                input.form-input.half(type="text" name="name" placeholder="Name" autocomplete="off" required)
                            div 
                                input.form-input.half(type="email" name="email" placeholder="Email" autocomplete="off" required)
                        
                        select.form-input(name="qualification" required="")
                            option(value="" disabled selected) Qualification
                            option(value="intermediate") Intermediate (12th pass)
                            option(value="Graduate") Graduate
                            option(value="Post Graduate") Post Graduate
                        .center 
                            div 
                                select.form-input.half(name="interestedIn" required="")
                                    option(value="" disabled selected) Programs Interested In
                                    option(value="bca") BCA
                                    option(value="bba") BBA
                                    option(value="mca") MCA
                                    option(value="mba") MBA
                            div
                                select.form-input.half(name="applicationNo" required)
                                    option(value="" disabled selected) Exam Appeared / Interested In
                                    option(value="cuet") CUET
                                    option(value="cmat") CMAT
                                    option(value="cet") CET
                                    option(value="not_appeared") Not Appeared

                        .center 
                            div 
                                input.form-input.half(type="tel" name="phone" placeholder="Phone" autocomplete="off" required)
                        

                        textarea.form-input(name="remark" rows="6" placeholder="Remark (if any)")
                        button(type="submit") SUBMIT


        if affidavitInfo
    .affidavit-section
        .affidavit-header
            h2= affidavitInfo.title
            
        .affidavit-content
            .form-link-box
                .form-group
                    label Affidavit Registration Form Link:
                    a.btn-primary(
                        href=affidavitInfo.form_link 
                        target="_blank"
                    )
                        i.fas.fa-external-link-alt
                        | Open Affidavit Form

            if affidavitInfo.sections && affidavitInfo.sections.length > 0
                .instructions-box
                    h3 Instructions:
                    each section in affidavitInfo.sections
                        .section
                            if section.title
                                h4= section.title
                            
                            if section.items && section.items.length > 0
                                ul
                                    each item in section.items
                                        li= item
                            
                            if section.subsections && section.subsections.length > 0
                                each subsection in section.subsections
                                    .subsection
                                        if subsection.title
                                            h5= subsection.title
                                        if subsection.items && subsection.items.length > 0
                                            ul
                                                each item in subsection.items
                                                    li= item

        .contact-section.container-lg
            .contact-info
                h2.primary_heading2 Contact Information
                .contact-details
                    p.contact-item
                        strong Phone No: 
                        | +91-9070337770
                    p.contact-item
                        strong Email: 
                        a(href="mailto:contact@iitm.edu.in") contact@iitm.edu.in